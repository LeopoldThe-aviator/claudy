- content_for :page_header do
  = render 'layouts/components/page_header',
           title: @booking.name,
           secondary: "Du #{@booking.from_date} au #{@booking.to_date}",
           links: [ \
             delete_link(@booking.object, "Supprimer cette r√©servation"),
             link_to( \
               "Mettre √† jour",
               edit_booking_path(@booking),
               class: "btn-page-header" \
             ) \
           ]

= render "bookings/status_callout", 
         booking: @booking

ul.mt-2.mb-4.grid.grid-cols-1.gap-5.sm:grid-cols-2.sm:gap-6.lg:grid-cols-4[role="list"]
  li.col-span-1.flex.rounded-md.shadow-sm
    .flex.w-24.flex-shrink-0.items-center.justify-center.bg-blue-600.rounded-l-md.text-xl.font-medium.text-white
      = @booking.adults
    .flex.flex-1.items-center.justify-between.truncate.rounded-r-md.border-t.border-r.border-b.border-gray-200.bg-white
      .flex-1.truncate.px-4.py-2.text-sm
        span.font-medium.text-gray-900.hover:text-gray-600
          | üßë Adultes
  - if @booking.object.children.present? && @booking.object.children > 0
    li.col-span-1.flex.rounded-md.shadow-sm
      .flex.w-24.flex-shrink-0.items-center.justify-center.bg-rose-600.rounded-l-md.text-xl.font-medium.text-white
        = @booking.children
      .flex.flex-1.items-center.justify-between.truncate.rounded-r-md.border-t.border-r.border-b.border-gray-200.bg-white
        .flex-1.truncate.px-4.py-2.text-sm
          span.font-medium.text-gray-900.hover:text-gray-600
            | üëß Enfants
  - if @booking.object.babies.present? && @booking.object.babies > 0
    li.col-span-1.flex.rounded-md.shadow-sm
      .flex.w-24.flex-shrink-0.items-center.justify-center.bg-purple-600.rounded-l-md.text-xl.font-medium.text-white
        = @booking.babies
      .flex.flex-1.items-center.justify-between.truncate.rounded-r-md.border-t.border-r.border-b.border-gray-200.bg-white
        .flex-1.truncate.px-4.py-2.text-sm
          span.font-medium.text-gray-900.hover:text-gray-600
            | üë∂ B√©b√©s

.grid.grid-cols-3.gap-4
  .col-span-2.space-y-4
    .overflow-hidden.bg-white.shadow.sm:rounded-lg
      .px-4.py-5.sm:px-6
        h3.text-lg.font-medium.leading-6.text-gray-900
          | Informations personnelles
        / p.mt-1.max-w-2xl.text-sm.text-gray-500
          | Nom et coordonn√©es de la personne qui a r√©serv√©
      .border-t.border-gray-200
        dl
          .px-4.py-5.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
            dt.text-sm.font-medium.text-gray-500
              | Nom
            dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
              = @booking.name
              - if @booking.group_name.present?
                .text-gray-500 = @booking.group_name
          .px-4.py-5.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
            dt.text-sm.font-medium.text-gray-500
              | T√©l√©phone
            dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
              = @booking.phone
          .px-4.py-5.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
            dt.text-sm.font-medium.text-gray-500
              | Adresse email
            dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
              = mail_to @booking.email

    .overflow-hidden.bg-white.shadow.sm:rounded-lg
      .px-4.py-5.sm:px-6
        h3.text-lg.font-medium.leading-6.text-gray-900
          | Chambres r√©serv√©es
        / p.mt-1.max-w-2xl.text-sm.text-gray-500
          | Chambres 
      .border-t.border-gray-200
        dl
          - if !@booking.lodging.nil?
            .px-4.py-5.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
              dt.text-sm.font-medium.text-gray-500
                | H√©bergement de groupe
              dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0      
                = @booking.lodging.name
          .px-4.py-5.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
            dt.text-sm.font-medium.text-gray-500
              | Chambres et dates
            dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
              table
                tbody
                  - @reservations_by_date.each do |date, reservations|
                    tr
                      td(style="width: 10rem") = date
                      td = reservations.collect { |r| r.room.name }.join(", ")

    .overflow-hidden.bg-white.shadow.sm:rounded-lg
      .px-4.py-5.sm:px-6
        h3.text-lg.font-medium.leading-6.text-gray-900
          | R√©servation
        / p.mt-1.max-w-2xl.text-sm.text-gray-500
          | Nom et coordonn√©es de la personne qui a r√©serv√©
      .border-t.border-gray-200
        dl
          .px-4.py-5.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
            dt.text-sm.font-medium.text-gray-500
              | Draps √† fournir
            dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
              = @booking.bedsheets
          .px-4.py-5.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
            dt.text-sm.font-medium.text-gray-500
              | Essuies √† fournir
            dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
              = @booking.towels

    .overflow-hidden.bg-white.shadow.sm:rounded-lg
      .px-4.py-5.sm:px-6
        h3.text-lg.font-medium.leading-6.text-gray-900
          | Options
        / p.mt-1.max-w-2xl.text-sm.text-gray-500
          | Nom et coordonn√©es de la personne qui a r√©serv√©
      .border-t.border-gray-200
        dl
          - if @booking.option_partyhall?
            .px-4.py-5.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
              dt.text-sm.font-medium.text-gray-500
                | Location de salle
              dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
                | ‚úîÔ∏è Int√©ress√© de louer la salle des 4 Sources
          - if @booking.option_bread?
            .px-4.py-5.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
              dt.text-sm.font-medium.text-gray-500
                | Pain
              dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
                | ‚úîÔ∏è Int√©ress√© par la commande de pains
          - if @booking.option_babysitting?
            .px-4.py-5.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
              dt.text-sm.font-medium.text-gray-500
                | Baby-sitting
              dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
                | ‚úîÔ∏è Int√©ress√© par un service de baby-sitting
          - if @booking.option_discgolf?
            .px-4.py-5.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
              dt.text-sm.font-medium.text-gray-500
                | Disc-golf
              dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
                | ‚úîÔ∏è Int√©ress√© par une session d'initiation au disc-golf

  .space-y-4
    .overflow-hidden.shadow.sm:rounded-lg.bg-white
      .flex.place-content-between.px-4.py-5.sm:px-6
        h3.text-lg.font-medium.leading-6.text-gray-900
          | R√©servation ##{@booking.token}
      .border-t.border-gray-200
        .px-6.py-5
          = link_to "Page web de la r√©servation",
                    public_booking_path(@booking.token),
                    class: "text-white bg-gradient-to-br from-pink-500 to-orange-400 focus:ring-4 focus:outline-none focus:ring-pink-200 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",
                    target: "_blank"

    .overflow-hidden.shadow.sm:rounded-lg(class="#{@booking.payment_background}")
      .flex.place-content-between.px-4.py-5.sm:px-6
        h3.text-lg.font-medium.leading-6.text-gray-900
          | Paiement
        div = @booking.payment_status
        / p.mt-1.max-w-2xl.text-sm.text-gray-500
          | Nom et coordonn√©es de la personne qui a r√©serv√©
      .border-t.border-gray-200
        dl.my-2
          .px-4.py-2.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
            dt.text-sm.font-medium.text-gray-500
              | Montant √† payer
            dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
              = @booking.price
          .px-4.py-2.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
            dt.text-sm.font-medium.text-gray-500
              | Paiement
            dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
              = @booking.payment_method
          .px-4.py-2.sm:grid.sm:grid-cols-3.sm:gap-4.sm:px-6
            dt.text-sm.font-medium.text-gray-500
              | Facture
            dd.mt-1.text-sm.text-gray-900.sm:col-span-2.sm:mt-0
              - if @booking.invoice_status == "requested"
                | üßæ Demand√©e par le client
              - else
                | Non requise

    - if @booking.notes.presence
      .overflow-hidden.bg-yellow-100.shadow.sm:rounded-lg
        .px-4.py-5.sm:px-6
          h3.text-lg.font-medium.leading-6.text-gray-900
            | Notes
          p.mt-1.max-w-2xl.text-sm.text-gray-500
            | Informations √† usage interne
        .border-t.border-gray-200.px-6.py-4
          .content.space-y-4
            = simple_format @booking.notes
